{"title":"EKS-V3-Stage Cluster Overview Dashboard ","description":"","widgets":[{"id":6390333099532916,"definition":{"title":"Cluster Health Overview","title_align":"left","background_color":"blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8660996379592338,"definition":{"title":"CPU Usage","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":80},{"comparator":"<","palette":"white_on_yellow","value":90},{"comparator":">","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.requests{$cluster}","aggregator":"last"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.node.cpu_allocatable{$cluster}","aggregator":"last"}],"formulas":[{"formula":"(query1 / query2) * 100"}]}],"autoscale":false,"custom_unit":"%","precision":2},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":27112096702006,"definition":{"title":"Cluster CPU Capacity  ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"capacity","formula":"query3"},{"alias":"allocatable","formula":"query4"},{"alias":"requests","formula":"query5"}],"queries":[{"data_source":"metrics","name":"query3","query":"sum:kubernetes_state.node.cpu_capacity{$cluster}"},{"data_source":"metrics","name":"query4","query":"sum:kubernetes_state.node.cpu_allocatable{$cluster}"},{"data_source":"metrics","name":"query5","query":"sum:kubernetes.cpu.requests{$cluster}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":0,"width":9,"height":2}},{"id":2523324541388484,"definition":{"title":"Cluster  Cpu Utilazation","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":80},{"comparator":"<","palette":"white_on_yellow","value":90},{"comparator":">","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:system.cpu.idle{$cluster}","aggregator":"avg"}],"formulas":[{"number_format":{"unit":{"label":"%","type":"custom_unit_label"}},"formula":"100 - query1"}]}],"precision":2},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":8863392817922784,"definition":{"title":"Cluster Cpu Utilization","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"100 - query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:system.cpu.idle{$cluster} by {kube_cluster_name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"CPU Utilization (%)","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":2,"width":9,"height":2}},{"id":5238957675727826,"definition":{"title":"Memory Usage","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":80},{"comparator":">","palette":"white_on_red","value":90},{"comparator":"<","palette":"white_on_yellow","value":90}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.memory.requests{$cluster}","aggregator":"last"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.node.memory_allocatable{$cluster}","aggregator":"last"}],"formulas":[{"formula":"(query1 / query2) * 100"}]}],"autoscale":false,"custom_unit":"%","precision":2},"layout":{"x":0,"y":4,"width":2,"height":2}},{"id":3000700704832776,"definition":{"title":"Cluster Memory Capacity ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"capacity","formula":"query3"},{"alias":"allocatable","formula":"query6"},{"alias":"requests","formula":"query4"}],"queries":[{"data_source":"metrics","name":"query3","query":"sum:kubernetes_state.node.memory_capacity{$cluster}"},{"data_source":"metrics","name":"query6","query":"sum:kubernetes_state.node.memory_allocatable{$cluster}"},{"data_source":"metrics","name":"query4","query":"sum:kubernetes.memory.requests{$cluster}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":4,"width":9,"height":2}},{"id":6076751795271030,"definition":{"title":"Cluster  Memory Utilazation","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":80},{"comparator":"<","palette":"white_on_yellow","value":90},{"comparator":">","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:kubernetes.memory.usage_pct{$cluster}","aggregator":"avg"}],"formulas":[{"number_format":{"unit":{"label":"%","type":"custom_unit_label"}},"formula":"query1 * 100"}]}],"precision":2},"layout":{"x":0,"y":6,"width":2,"height":2}},{"id":2553556836305634,"definition":{"title":"Cluster Memory Utilization","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"usage","formula":"query"}],"queries":[{"data_source":"metrics","name":"query","query":"avg:kubernetes.memory.usage_pct{$cluster}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":6,"width":9,"height":2}},{"id":6090452206587080,"definition":{"title":"Cluster Disk Utilization ","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":80},{"comparator":"<","palette":"white_on_yellow","value":90},{"comparator":">","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:kubernetes.node.filesystem.usage_pct{$cluster}","aggregator":"avg"}],"formulas":[{"number_format":{"unit":{"label":"%","type":"custom_unit_label"}},"formula":"query1 * 100"}]}],"precision":2},"layout":{"x":0,"y":8,"width":2,"height":2}},{"id":527882314076238,"definition":{"title":"Cluster Disk Utilization ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"usage","formula":"query"}],"queries":[{"data_source":"metrics","name":"query","query":"avg:kubernetes.node.filesystem.usage{$cluster} by {host}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":8,"width":9,"height":2}},{"id":7709953950820678,"definition":{"title":"Pod Utilization","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":80},{"comparator":"<","palette":"white_on_yellow","value":90},{"comparator":">","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.pods.running{$cluster}","aggregator":"last"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.node.pods_capacity{$cluster}","aggregator":"last"}],"formulas":[{"formula":"(query1 / query2) * 100"}]}],"custom_unit":"%","precision":2},"layout":{"x":0,"y":10,"width":2,"height":2}},{"id":1645568509757470,"definition":{"title":"Cluster Pod Utilization","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.node.pods_capacity{$cluster}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.node.pods_allocatable{$cluster}"},{"data_source":"metrics","name":"query3","query":"sum:kubernetes.pods.running{$cluster}"}],"formulas":[{"formula":"query1","alias":"capacity"},{"formula":"query2","alias":"allocatable"},{"formula":"query3","alias":"running"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":10,"width":9,"height":2}}]},"layout":{"x":0,"y":0,"width":12,"height":13}},{"id":8799874548929438,"definition":{"title":"Nodes","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5868007822292984,"definition":{"title":"Nodes","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.node.count{$cluster}","aggregator":"last"}]}],"custom_unit":" ","precision":0},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":8343146764718024,"definition":{"title":"Nodes not ready","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"red_on_white","value":0},{"comparator":"<=","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.nodes.by_condition{status:true,!condition:ready,$cluster}","aggregator":"last"}]}],"precision":0},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":6164815179386056,"definition":{"title":"Sum Kubernetes CPU requests per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"CPU Requests per Node","formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.requests{$cluster} by {host}"}],"response_format":"timeseries","style":{"palette":"warm"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":3343433454570092,"definition":{"title":"CPU % utilization per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"100 - query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:system.cpu.idle{$cluster} by {host}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"}},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":6355109374643286,"definition":{"title":"Kubelets up","title_size":"16","title_align":"center","time":{"live_span":"10m"},"type":"check_status","check":"kubernetes.kubelet.check","grouping":"cluster","group_by":[],"tags":["$cluster","$scope"]},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":2436315021519092,"definition":{"title":"Kubelet Ping","title_size":"16","title_align":"center","time":{"live_span":"10m"},"type":"check_status","check":"kubernetes.kubelet.check.ping","grouping":"cluster","group_by":[],"tags":["$cluster","$scope"]},"layout":{"x":2,"y":2,"width":2,"height":2}},{"id":2980731958552922,"definition":{"title":"Sum Kubernetes memory requests per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.memory.requests{$cluster} by {host}"}],"formulas":[{"formula":"query1","alias":"Memory Requests per Node"}],"style":{"palette":"cool"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":195154766631162,"definition":{"title":"Memory utilization % per node","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query1 * 100"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:kubernetes.memory.usage_pct{$cluster} by {host}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false}},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":2345063870266398,"definition":{"title":"Total CPU","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.node.cpu_capacity{$cluster}","aggregator":"last"}]}],"autoscale":false,"precision":0},"layout":{"x":0,"y":4,"width":2,"height":2}},{"id":230162706401196,"definition":{"title":"Total memory","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.node.memory_capacity{$cluster}","aggregator":"avg"}]}],"autoscale":true,"precision":0},"layout":{"x":2,"y":4,"width":2,"height":2}},{"id":755037665151038,"definition":{"title":"Nodes not in Ready condition","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.nodes.by_condition{status:true,!condition:ready,$cluster} by {status,condition,kube_cluster_name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":13,"width":12,"height":7}},{"id":1319686169393300,"definition":{"title":"Deployments","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5885014027400048,"definition":{"title":"Deployments","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas{$cluster} by {kube_deployment}","aggregator":"avg"}],"formulas":[{"formula":"count_nonzero(query1)"}]}],"autoscale":true,"precision":0},"layout":{"x":0,"y":0,"width":6,"height":2}},{"id":1340956868968308,"definition":{"title":"Outdated","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">=","palette":"yellow_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas{*,*,*,$cluster}","aggregator":"last"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.deployment.replicas_updated{*,*,*,$cluster}","aggregator":"last"}],"formulas":[{"formula":"query1 - query2"}]}],"autoscale":true,"custom_links":[],"precision":0},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":5616054473978544,"definition":{"title":"Replicas compared to a week ago","title_size":"16","title_align":"left","type":"change","requests":[{"change_type":"absolute","increase_good":true,"order_by":"change","order_dir":"desc","response_format":"scalar","formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes_state.deployment.replicas{$cluster} by {kube_cluster_name,kube_namespace,kube_deployment}","aggregator":"sum"}]}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":1143773048851206,"definition":{"title":"Desired","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","custom_fg_color":"#6a54a1","palette":"custom_text","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas_desired{$cluster}","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":7399720469258462,"definition":{"title":"Pods desired","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas_desired{$cluster} by {kube_deployment}"}],"formulas":[{"formula":"query1","alias":"Pods Desired"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":2,"width":4,"height":2}},{"id":4660346033857862,"definition":{"title":"Unavailable","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"red_on_white","value":0},{"comparator":"<=","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas_unavailable{*,*,*,$cluster}","aggregator":"last"}]}],"autoscale":true,"custom_links":[],"precision":0},"layout":{"x":6,"y":2,"width":2,"height":2}},{"id":4776257307175410,"definition":{"title":"Pods unavailable","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas_unavailable{$cluster} by {kube_deployment}"}],"formulas":[{"formula":"query1","alias":"Pods Unavailable"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":8187283452511802,"definition":{"title":"Replicas","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","custom_fg_color":"#6a53a1","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas{*,*,*,$cluster}","aggregator":"last"}]}],"autoscale":true,"custom_links":[],"precision":0},"layout":{"x":0,"y":4,"width":2,"height":2}},{"id":212548750013574,"definition":{"title":"Replicas available","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas_available{$cluster} by {kube_deployment}"}],"formulas":[{"formula":"query1","alias":"Replicas Available"}],"style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":4,"width":4,"height":2}},{"id":6939718705668978,"definition":{"title":"Desired Not Available","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"red_on_white","value":0},{"comparator":"<=","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas_desired{*,*,*,$cluster}","aggregator":"last"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.deployment.replicas_available{*,*,*,$cluster}","aggregator":"last"}],"formulas":[{"formula":"query1 - query2"}]}],"autoscale":true,"custom_links":[],"precision":0},"layout":{"x":6,"y":4,"width":2,"height":2}},{"id":5710955501288454,"definition":{"title":"Desired Not Available","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.deployment.replicas_desired{$cluster} by {kube_deployment}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.deployment.replicas_available{$cluster} by {kube_deployment}"}],"formulas":[{"formula":"query1 - query2","alias":"Desired but Unavailable"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":4,"width":4,"height":2}},{"id":2640475655857522,"definition":{"title":"Most CPU-intensive Deployments","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.usage.total{!pod_name:no_pod,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":0,"y":6,"width":4,"height":4}},{"id":741990811413072,"definition":{"title":"Most memory-intensive Deployments","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.memory.usage{!pod_name:no_pod,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":4,"y":6,"width":4,"height":4}},{"id":2496951762152516,"definition":{"title":"Most Network-intensive Deployments","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.tx_bytes{!pod_name:no_pod,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":8,"y":6,"width":4,"height":4}}]},"layout":{"x":0,"y":20,"width":12,"height":11}},{"id":8992645401673520,"definition":{"title":"CPU requests, limits and usage","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.requests{$kube_namespace,$cluster}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes.cpu.usage.total{$kube_namespace,$cluster}"},{"data_source":"metrics","name":"query3","query":"sum:kubernetes.cpu.limits{$kube_namespace,$cluster}"}],"formulas":[{"formula":"query1","alias":"Requests"},{"formula":"query2","alias":"Usage"},{"formula":"query3","alias":"Limits"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"right_yaxis":{"label":"","scale":"linear","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":6348109156914410,"definition":{"title":"Memory requests, limits and usage","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.memory.requests{$kube_namespace,$cluster}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes.memory.rss{$kube_namespace,$cluster}"},{"data_source":"metrics","name":"query3","query":"sum:kubernetes.memory.limits{$kube_namespace,$cluster}"}],"formulas":[{"formula":"query1","alias":"Requests"},{"formula":"query2","alias":"Usage"},{"formula":"query3","alias":"Limits"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"right_yaxis":{"label":"","scale":"linear","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":8107939204187076,"definition":{"title":"Network Usage (Rx / Tx rate)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.rx_bytes{$kube_namespace,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes.network.tx_bytes{$kube_namespace,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":4564567891221088,"definition":{"title":"CPU Usage by Deployment","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.usage.total{$kube_namespace,$cluster} by {kube_cluster_name,kube_namespace,kube_deployment}"}],"formulas":[{"formula":"exclude_null(query1)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"right_yaxis":{"label":"","scale":"linear","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":8970518855728378,"definition":{"title":"Memory Usage by Deployment","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:kubernetes.memory.usage{$kube_namespace,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}"}],"formulas":[{"formula":"exclude_null(query1)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"right_yaxis":{"label":"","scale":"linear","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":896064253147792,"definition":{"title":"Network Errors","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.rx_errors{$kube_namespace,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes.network.tx_errors{$kube_namespace,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"right_yaxis":{"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[{"label":"y = 0","value":"y = 0","display_type":"ok dashed"}],"custom_links":[]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":4766710825083802,"definition":{"title":"Most Disk-intensive Deployments","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.filesystem.usage{$kube_namespace,!pod_name:no_pod,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":3385232338654126,"definition":{"title":"Disk Usage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.filesystem.usage{$kube_namespace,$cluster} by {kube_deployment,kube_namespace,kube_cluster_name}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"right_yaxis":{"label":"","scale":"linear","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":3665693974998052,"definition":{"title":"DaemonSets","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8694086522074152,"definition":{"title":"DaemonSets","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:kubernetes_state.daemonset.desired{$cluster} by {kube_cluster_name,kube_namespace,kube_daemon_set}","aggregator":"avg"}],"formulas":[{"formula":"count_nonzero(query1)"}]}],"precision":0},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":6531891600754220,"definition":{"title":"DaemonSets","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:kubernetes_state.daemonset.desired{$cluster} by {kube_daemon_set}"}],"formulas":[{"formula":"query1","alias":"DaemonSets"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":0,"width":4,"height":2}},{"id":5174867395911444,"definition":{"title":"Scheduled","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.daemonset.scheduled{$cluster}","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":1423962034069958,"definition":{"title":"Desired","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","custom_fg_color":"#6a53a1","palette":"custom_text","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.daemonset.desired{$cluster}","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":8,"y":0,"width":2,"height":2}},{"id":2051771477449946,"definition":{"title":"Misscheduled","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.daemonset.misscheduled{$cluster}","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":10,"y":0,"width":2,"height":2}},{"id":7724554196632320,"definition":{"title":"Ready","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0},{"comparator":"<=","palette":"red_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.daemonset.ready{$cluster}","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":2584551292628886,"definition":{"title":"Replicas Ready","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.daemonset.ready{$cluster} by {kube_daemon_set}"}],"formulas":[{"formula":"query1","alias":"Replicas ready"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":2,"width":4,"height":2}},{"id":2258680712516686,"definition":{"title":"Replicas desired","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.daemonset.desired{$cluster} by {kube_daemon_set}"}],"formulas":[{"formula":"query1","alias":"Replicas Desired"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":2,"width":4,"height":2}},{"id":3259236030691062,"definition":{"title":"Most Network-intensive DaemonSets","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.tx_bytes{$cluster} by {kube_namespace,kube_cluster_name,kube_daemon_set}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":8276690166742000,"definition":{"title":"Most memory-intensive DaemonSet","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.memory.usage{$cluster} by {kube_namespace,kube_cluster_name,kube_daemon_set}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":2787071846991780,"definition":{"title":"Most CPU-intensive DaemonSet","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.usage.total{$cluster} by {kube_namespace,kube_cluster_name,kube_daemon_set}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":8,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":37,"width":12,"height":7}},{"id":5505695884271920,"definition":{"title":"StatefulSets","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7698883867722820,"definition":{"title":"Replicas","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.statefulset.replicas{$cluster} by {kube_cluster_name,kube_namespace,kube_stateful_set}","aggregator":"last"}]}],"autoscale":true,"precision":2},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":5124075947051404,"definition":{"title":"Replicas","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.statefulset.replicas{$cluster} by {kube_namespace,kube_cluster_name,kube_stateful_set}"}],"formulas":[{"formula":"query1","alias":"Replicas"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":0,"width":4,"height":2}},{"id":3315144919908218,"definition":{"title":"Current","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.statefulset.replicas_current{$cluster} by {kube_cluster_name,kube_namespace,kube_stateful_set}","aggregator":"last"}]}],"autoscale":true,"precision":2},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":1701931685712916,"definition":{"title":"Ready","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.statefulset.replicas_ready{$cluster} by {kube_cluster_name,kube_namespace,kube_stateful_set}","aggregator":"last"}]}],"autoscale":true,"precision":2},"layout":{"x":8,"y":0,"width":2,"height":2}},{"id":6718161175699334,"definition":{"title":"Updated","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.statefulset.replicas_updated{$cluster} by {kube_cluster_name,kube_namespace,kube_stateful_set}","aggregator":"last"}]}],"autoscale":true,"precision":2},"layout":{"x":10,"y":0,"width":2,"height":2}},{"id":5462571191299972,"definition":{"title":"Desired","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","custom_fg_color":"#6a54a1","palette":"custom_text","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.statefulset.replicas_desired{$cluster}","aggregator":"last"}]}],"autoscale":true},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":4080623938546924,"definition":{"title":"Desired Replicas","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.statefulset.replicas_desired{$cluster} by {kube_cluster_name,kube_namespace,kube_stateful_set}"}],"formulas":[{"formula":"query1","alias":"Desired replicas"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":2,"width":4,"height":2}},{"id":2408198970770654,"definition":{"title":"Replicas compared to a week ago","title_size":"16","title_align":"left","type":"change","requests":[{"change_type":"absolute","increase_good":true,"order_by":"change","order_dir":"desc","response_format":"scalar","formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes_state.statefulset.replicas{$cluster} by {kube_cluster_name,kube_namespace,kube_stateful_set}","aggregator":"sum"}]}]},"layout":{"x":6,"y":2,"width":6,"height":2}}]},"layout":{"x":0,"y":44,"width":12,"height":5,"is_column_break":true}},{"id":7683300513202690,"definition":{"title":"Replicasets","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4058410585819612,"definition":{"title":"Active ReplicaSets","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.replicaset.replicas{$cluster} by {kube_cluster_name,kube_namespace,kube_replica_set}","aggregator":"last"}],"formulas":[{"formula":"count_nonzero(query1)"}]}],"precision":0},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":3041888101263504,"definition":{"title":"Replicas","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","custom_fg_color":"#6a53a1","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.replicaset.replicas{$cluster}","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":6368935701038138,"definition":{"title":"Desired","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.replicaset.replicas_desired{$cluster}","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":4,"y":0,"width":2,"height":2}},{"id":2150563330149852,"definition":{"title":"Inactive ReplicaSets","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:kubernetes_state.replicaset.replicas{$cluster} by {kube_cluster_name,kube_namespace,kube_replica_set}"}],"formulas":[{"formula":"count_not_null(query1) - count_nonzero(query1)","alias":"Inactive replicasets"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":0,"width":6,"height":2}},{"id":7674734951279834,"definition":{"title":"Ready","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.replicaset.replicas_ready{$cluster}","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":1186046589928988,"definition":{"title":"Replicas Not Ready","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","custom_fg_color":"#e5a227","palette":"custom_text","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.replicaset.replicas_desired{$cluster}","aggregator":"last"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.replicaset.replicas_ready{$cluster}","aggregator":"last"}],"formulas":[{"formula":"query1 - query2"}]}],"autoscale":true,"precision":0},"layout":{"x":2,"y":2,"width":2,"height":2}},{"id":6746898056079810,"definition":{"title":"Replicas Not Ready","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.replicaset.replicas_desired{$cluster} by {kube_cluster_name,kube_namespace,kube_replica_set}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.replicaset.replicas_ready{$cluster} by {kube_cluster_name,kube_namespace,kube_replica_set}"}],"formulas":[{"formula":"query1 - query2","alias":"Replicas not ready"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":3642457848921060,"definition":{"title":"Most Network-intensive ReplicaSets","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.tx_bytes{$cluster,!pod_name:no_pod} by {kube_namespace,kube_cluster_name,kube_replica_set}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":8,"y":2,"width":4,"height":4}},{"id":3564445105033976,"definition":{"title":"Most CPU-intensive ReplicaSet","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.usage.total{$cluster,!pod_name:no_pod} by {kube_namespace,kube_cluster_name,kube_replica_set}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":0,"y":4,"width":4,"height":4}},{"id":4917037394307252,"definition":{"title":"Most memory-intensive ReplicaSet","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.memory.usage{$cluster,!pod_name:no_pod} by {kube_namespace,kube_cluster_name,kube_replica_set}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":4,"y":4,"width":4,"height":4}}]},"layout":{"x":0,"y":49,"width":12,"height":9}},{"id":7520467412787552,"definition":{"title":"Pods","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4566822265811362,"definition":{"title":"Running pods per namespace","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.pods.running{$cluster} by {kube_cluster_name,kube_namespace}"}],"formulas":[{"formula":"query1","alias":"running pods"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[],"custom_links":[{"label":"Search Namespace on Google","link":"https://www.google.com?search={{kube_namespace.value}}"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":784360980068604,"definition":{"title":"Pods running by namespace","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_red","value":2000},{"comparator":">","palette":"white_on_yellow","value":1500},{"comparator":"<=","palette":"white_on_green","value":3000}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.pods.running{*,$cluster} by {kube_cluster_name,kube_namespace}","aggregator":"max"}],"formulas":[{"formula":"query1"}],"sort":{"count":100,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":4792840122296770,"definition":{"title":"CrashloopBackOff by Pod","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.container.waiting{$cluster,reason:crashloopbackoff,*} by {pod_name}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[{"label":"y = 0","value":"y = 0","display_type":"ok dashed"}],"custom_links":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":8211204928017120,"definition":{"title":"Pods in ready state by node","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":"<=","palette":"white_on_green","value":24},{"comparator":">","palette":"white_on_red","value":32},{"comparator":">","palette":"white_on_yellow","value":24}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.pod.ready{*,$cluster,condition:true} by {kube_cluster_name,host,nodepool}","aggregator":"last"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":2903962442888548,"definition":{"title":"Pods in bad phase by namespaces","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_red","value":0},{"comparator":"<=","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.pod.status_phase{*,$cluster,!pod_phase:running,!pod_phase:succeeded} by {cluster_name,kube_namespace,pod_phase}","aggregator":"last"}],"formulas":[{"formula":"query1"}],"sort":{"count":100,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":4382226984899930,"definition":{"title":"Running pods per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.pods.running{$cluster} by {host}"}],"formulas":[{"formula":"query1","alias":"running pods"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":58,"width":12,"height":5}},{"id":4350857053103824,"definition":{"title":"Services","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2847962601795574,"definition":{"title":"Services","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.service.count{$cluster} by {kube_cluster_name}","aggregator":"last"}]}],"precision":0},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":8520123118543148,"definition":{"title":"Service types per cluster","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.service.count{$cluster} by {type,kube_cluster_name}"}],"formulas":[{"formula":"query1","alias":"service type per cluster"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":0,"width":4,"height":2}},{"id":555073756863232,"definition":{"title":"# Pods running by Service","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.pods.running{$cluster} by {kube_service,kube_cluster_name}"}],"formulas":[{"formula":"exclude_null(query1)","alias":"# of pods"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":0,"width":6,"height":2}},{"id":3184342567057010,"definition":{"title":"Most CPU-intensive Services","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.usage.total{$cluster,!pod_name:no_pod} by {kube_service,kube_namespace,kube_cluster_name}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":0,"y":2,"width":4,"height":4}},{"id":1907354413379420,"definition":{"title":"Most memory-intensive Services","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.memory.usage{$cluster,!pod_name:no_pod} by {kube_service,kube_namespace,kube_cluster_name}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":4,"y":2,"width":4,"height":4}},{"id":7046989743090380,"definition":{"title":"Most Network-intensive Services","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.tx_bytes{$cluster,!pod_name:no_pod} by {kube_service,kube_namespace,kube_cluster_name}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":8,"y":2,"width":4,"height":4}},{"id":1248343791879684,"definition":{"title":"CPU Usage by Service","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.cpu.usage.total{$kube_namespace,$kube_service,$cluster} by {kube_service,kube_namespace,kube_cluster_name}"}],"formulas":[{"formula":"exclude_null(query1)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"}},"layout":{"x":0,"y":6,"width":4,"height":4}},{"id":7818582655635354,"definition":{"title":"Memory Usage by Service","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.memory.usage{$kube_namespace,$kube_service,$cluster} by {kube_service,kube_namespace,kube_cluster_name}"}],"formulas":[{"formula":"exclude_null(query1)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"}},"layout":{"x":4,"y":6,"width":4,"height":4}},{"id":1267902953012490,"definition":{"title":"Network Usage (Rx / Tx rate)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.rx_bytes{$kube_namespace,$kube_service,$cluster} by {kube_service,kube_namespace,kube_cluster_name}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes.network.tx_bytes{$kube_namespace,$kube_service,$cluster} by {kube_service,kube_namespace,kube_cluster_name}"}],"formulas":[{"formula":"exclude_null(query1)"},{"formula":"exclude_null(query2)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"}},"layout":{"x":8,"y":6,"width":4,"height":2}},{"id":7238859408654710,"definition":{"title":"Network Errors","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.rx_errors{$kube_namespace,$kube_service,$cluster} by {kube_service,kube_namespace,kube_cluster_name}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes.network.tx_errors{$kube_namespace,$kube_service,$cluster} by {kube_service,kube_namespace,kube_cluster_name}"}],"formulas":[{"formula":"exclude_null(query1)"},{"formula":"exclude_null(query2)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"markers":[{"label":"y = 0","value":"y = 0","display_type":"ok dashed"}]},"layout":{"x":8,"y":8,"width":4,"height":2}},{"id":440439292616412,"definition":{"title":"Disk Usage","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.filesystem.usage{$kube_namespace,$kube_service,$cluster} by {kube_service,kube_namespace,kube_cluster_name}"}],"formulas":[{"formula":"exclude_null(query1)"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"}},"layout":{"x":0,"y":10,"width":4,"height":2}},{"id":5777205695545744,"definition":{"title":"Most Disk-intensive Services","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.filesystem.usage{$kube_namespace,$kube_service,$cluster,!pod_name:no_pod} by {kube_service,kube_namespace,kube_cluster_name}","aggregator":"avg"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":4,"y":10,"width":4,"height":2}},{"id":3713923580636636,"definition":{"title":"Top Services by # Pods running","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.pods.running{$kube_service,$kube_namespace,$cluster} by {kube_service,kube_namespace,kube_cluster_name}","aggregator":"max"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"formula":"exclude_null(query1)","alias":"Pods"}]}]},"layout":{"x":8,"y":10,"width":4,"height":2}}]},"layout":{"x":0,"y":63,"width":12,"height":13}},{"id":8112601475680138,"definition":{"title":"Containers","title_align":"left","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":180815323239794,"definition":{"title":"Containers States","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.container.ready{$cluster}"},{"data_source":"metrics","name":"query2","query":"sum:kubernetes_state.container.running{$cluster}"},{"data_source":"metrics","name":"query3","query":"sum:kubernetes_state.container.terminated{$cluster}"},{"data_source":"metrics","name":"query4","query":"sum:kubernetes_state.container.waiting{$cluster}"}],"formulas":[{"formula":"query1","alias":"ready"},{"formula":"query2","alias":"running"},{"formula":"query3","alias":"terminated"},{"formula":"query4","alias":"waiting"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":26327155498484,"definition":{"title":"Container Restarts by Pod","title_size":"16","title_align":"left","show_legend":false,"legend_size":"4","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.container.restarts{$cluster,*,*,*,*,*} by {pod_name}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":7966759432517370,"definition":{"title":"Containers in CrashloopBackOff (by Pod)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"crashloopbackoff","formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.containers.state.waiting{$cluster,reason:crashloopbackoff} by {pod_name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[{"label":"y = 0","value":"y = 0","display_type":"ok dashed"}]},"layout":{"x":0,"y":3,"width":6,"height":3}},{"id":800533774116182,"definition":{"title":"Containers OOM Killed (by Pod)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"OOM killed","formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.containers.state.terminated{$cluster,reason:oomkilled} by {pod_name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[{"label":"y = 0","value":"y = 0","display_type":"ok dashed"}]},"layout":{"x":6,"y":3,"width":6,"height":3}}]},"layout":{"x":0,"y":76,"width":12,"height":7}},{"id":6043112359085216,"definition":{"title":"Disk I/O & Network","title_align":"left","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7803966643128,"definition":{"title":"Network in per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.rx_bytes{$cluster} by {host}"}],"formulas":[{"formula":"query1","alias":"network in per node"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":767033056966002,"definition":{"title":"Network errors per pod","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.rx_errors{$cluster} by {pod_name}"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.tx_errors{$cluster} by {pod_name}"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":7680384509261758,"definition":{"title":"Disk writes per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.io.write_bytes{$cluster} by {host}"}],"formulas":[{"formula":"query1","alias":"IO writes per node "}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":4394134494528172,"definition":{"title":"Network out per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.tx_bytes{$cluster} by {host}"}],"formulas":[{"formula":"query1","alias":"network out per node"}],"style":{"palette":"green"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":4251553725251296,"definition":{"title":"Network errors per node","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.rx_errors{$cluster} by {host}"}],"style":{"palette":"warm"},"display_type":"bars"},{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network.tx_errors{$cluster} by {host}"}],"style":{"palette":"warm"},"display_type":"bars"},{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.network_errors{$cluster} by {host}"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":7633035735733762,"definition":{"title":"Disk reads per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.io.read_bytes{$cluster} by {host}"}],"formulas":[{"formula":"query1","alias":"disk reads per node"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":83,"width":12,"height":5}},{"id":8935016901084686,"definition":{"title":"Jobs","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1517359151328290,"definition":{"title":"Jobs","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.job.count{$cluster}","aggregator":"last"}]}],"autoscale":false,"precision":0},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":5515572323760042,"definition":{"title":"Number of distinct Jobs","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Jobs","formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.job.count{$cluster}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":0,"width":4,"height":2}},{"id":3102424883879494,"definition":{"title":"Succeeded Job Pods","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.job.succeeded{$cluster}.as_count()","aggregator":"sum"}]}],"precision":0},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":5679798527480956,"definition":{"title":"Number of succeeded Job pods","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Succeeded pods","formula":"query1"}],"on_right_yaxis":false,"queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.job.succeeded{$cluster}.as_count()"}],"response_format":"timeseries","style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":1399353544603910,"definition":{"title":"Failed Pods","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"red_on_white","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.job.failed{$cluster}.as_count()","aggregator":"last"}]}],"precision":0},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":3348909904815938,"definition":{"title":"Number of failed Job Pods","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Failed pods","formula":"query1"}],"on_right_yaxis":false,"queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.job.failed{$cluster}.as_count()"}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":2,"width":4,"height":2}},{"id":197371681405188,"definition":{"title":"Cronjobs by Job Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Jobs","formula":"exclude_null(query1)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.job.count{$cluster,owner_kind:cronjob} by {owner_name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"label":"","scale":"linear","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":2,"width":6,"height":2}}]},"layout":{"x":0,"y":88,"width":12,"height":5}},{"id":3548917941884554,"definition":{"title":"Events","title_align":"left","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5203642607444658,"definition":{"title":"Number of Kubernetes events per node","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"event_timeline","query":"source:kubernetes $cluster"},"layout":{"x":0,"y":0,"width":12,"height":3}},{"id":7503502894478416,"definition":{"title":"","title_size":"16","time":{"live_span":"1w"},"requests":[{"query":{"query_string":"source:kubernetes $cluster","data_source":"event_stream","event_size":"s"},"columns":[],"response_format":"event_list"}],"type":"list_stream"},"layout":{"x":0,"y":3,"width":12,"height":5}}]},"layout":{"x":0,"y":93,"width":12,"height":9}},{"id":949621754450538,"definition":{"title":"REST Client Requests","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6348949365126710,"definition":{"title":"By code per second","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kube_apiserver.rest_client_requests_total.count{$cluster} by {code}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":6,"height":4}},{"id":1692968325257708,"definition":{"title":"By method per second","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:kube_apiserver.rest_client_requests_total.count{$cluster} by {method}.as_rate()","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":6,"y":0,"width":6,"height":4}}]},"layout":{"x":0,"y":102,"width":12,"height":5}},{"id":4411358772518306,"definition":{"title":"API Requests","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8350404762439416,"definition":{"title":"API requests per second (by code)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kube_apiserver.apiserver_request_total.count{$cluster} by {code}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":4235558135334470,"definition":{"title":"API requests per second (by resource)","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"sum:kube_apiserver.apiserver_request_total.count{$cluster} by {resource}.as_rate()","data_source":"metrics","name":"query1","aggregator":"last"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":4258232250187208,"definition":{"title":"API requests (by verb)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kube_apiserver.apiserver_request_total.count{$cluster} by {verb}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":3,"width":6,"height":3}}]},"layout":{"x":0,"y":107,"width":12,"height":7}},{"id":8154355865302854,"definition":{"title":"gRPC Requests","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2194019345640202,"definition":{"title":"gRPC requests per second (by code)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kube_apiserver.grpc_client_handled_total{$cluster} by {grpc_code}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":6,"height":4}},{"id":2222036658130244,"definition":{"title":"By (service, method) per second","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"sum:kube_apiserver.grpc_client_handled_total{$cluster} by {grpc_service,grpc_method}.as_rate()","data_source":"metrics","name":"query1","aggregator":"last"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":6,"y":0,"width":6,"height":4}}]},"layout":{"x":0,"y":114,"width":12,"height":5}},{"id":4047306068613502,"definition":{"title":"Admission Webhooks","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1566430886970918,"definition":{"title":"Admission webhooks fail to open","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kube_apiserver.apiserver_admission_webhook_fail_open_count.count{$cluster}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":7510935237105614,"definition":{"title":"Admission webhook latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:kube_apiserver.admission_webhook_admission_latencies_seconds.sum{$cluster}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":0,"width":6,"height":3}}]},"layout":{"x":0,"y":119,"width":12,"height":4}},{"id":3775391909496088,"definition":{"title":"Kubernetes Feature Gates","background_color":"gray","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7121949875432246,"definition":{"title":"Feature Gates","title_size":"16","title_align":"left","type":"query_table","requests":[{"queries":[{"data_source":"metrics","name":"query1","query":"avg:kube_apiserver.kubernetes_feature_enabled{$cluster} by {name,stage}","aggregator":"last"}],"response_format":"scalar","sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"conditional_formats":[{"comparator":">=","palette":"white_on_green","value":1},{"comparator":"<","palette":"white_on_red","value":1}],"cell_display_mode":"number","alias":"Enabled","formula":"query1"}]}],"has_search_bar":"auto"},"layout":{"x":0,"y":0,"width":7,"height":4}}]},"layout":{"x":0,"y":0,"width":7,"height":5}}],"template_variables":[{"name":"cluster","prefix":"kube_cluster_name","available_values":[],"default":"cs-v3-stage-aps1-01-eksec2"},{"name":"scope","prefix":"scope","available_values":[],"default":"*"},{"name":"kube_namespace","prefix":"kube_namespace","available_values":[],"default":"*"},{"name":"kube_service","prefix":"kube_service","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}
