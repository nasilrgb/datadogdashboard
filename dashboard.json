{"title":"EKS-B2B-Live Pods Overview","description":"","widgets":[{"id":8933567865449096,"definition":{"title":"Pods","title_align":"center","background_color":"blue","type":"group","layout_type":"ordered","widgets":[{"id":6891432778307160,"definition":{"title":"CPU-intensive pods","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"sum:kubernetes.cpu.usage.total{$namespace,$deployment,!pod_name:no_pod,$cluster,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":0,"y":0,"width":2,"height":3}},{"id":1565688625897228,"definition":{"title":"CPU Usage by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"alias":"CPU Usage","formula":"query1"}],"queries":[{"query":"avg:kubernetes.cpu.usage.total{$cluster,$deployment,$statefulset,$daemonset,$job,$host} by {pod_name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":0,"width":4,"height":3}},{"id":4450949345834476,"definition":{"title":"CPU Request and Limit by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"alias":"CPU Request","formula":"query1"},{"alias":"CPU Limit","formula":"query2"}],"queries":[{"query":"avg:kubernetes.cpu.requests{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"},{"query":"avg:kubernetes.cpu.limits{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":0,"width":4,"height":3}},{"id":8704870376063862,"definition":{"title":"Pods in Ready State By Node","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":"<=","palette":"white_on_green","value":24},{"comparator":">","palette":"white_on_red","value":32},{"comparator":">","palette":"white_on_yellow","value":24}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.pod.ready{$cluster,$namespace,$deployment,condition:true,$statefulset,$daemonset,$job} by {kube_cluster_name,host,nodepool}","aggregator":"last"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":10,"y":0,"width":2,"height":3}},{"id":8613566619352784,"definition":{"title":"Memory-intensive pods","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"sum:kubernetes.memory.usage{$namespace,$deployment,!pod_name:no_pod,$cluster,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":0,"y":3,"width":2,"height":3}},{"id":6589391191734594,"definition":{"title":"Memory Usage by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"alias":"Memory Usage","formula":"query1"}],"queries":[{"query":"avg:kubernetes.memory.usage{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":3,"width":4,"height":3}},{"id":6170550096001082,"definition":{"title":"Memory Request and limit by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"alias":"Memory Request","formula":"query1"},{"alias":"Memory Limit","formula":"query2"}],"queries":[{"query":"avg:kubernetes.memory.requests{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"},{"query":"avg:kubernetes.memory.limits{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":3,"width":4,"height":3}},{"id":6026771775733148,"definition":{"title":"CPU Utilisation by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"alias":"CPU utlisation","style":{"palette":"red"},"number_format":{"unit":{"type":"canonical_unit","unit_name":"percent"}},"formula":"(query1 / (query2 * 10000000))"}],"queries":[{"query":"avg:kubernetes.cpu.usage.total{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"},{"query":"avg:kubernetes.cpu.limits{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"cool","order_reverse":false,"order_by":"tags","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"100"},"markers":[]},"layout":{"x":0,"y":6,"width":6,"height":4}},{"id":1654404858226828,"definition":{"title":"Memory Utilisation by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"number_format":{"unit":{"type":"canonical_unit","unit_name":"percent"}},"formula":"(query1 / query2) * 100"}],"queries":[{"query":"avg:kubernetes.memory.usage{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"},{"query":"avg:kubernetes.memory.limits{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"100"},"markers":[]},"layout":{"x":6,"y":6,"width":6,"height":4}},{"id":3848732272463314,"definition":{"title":"Pods in Bad State by Namespace","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_red","value":0},{"comparator":"<=","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes_state.pod.ready{condition:false,$cluster,$namespace,$deployment,$statefulset,$daemonset,$job,!pod_phase:succeeded} by {kube_namespace}","aggregator":"last"}],"formulas":[{"formula":"exclude_null(query1)"}],"sort":{"count":25,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":0,"y":10,"width":2,"height":3}},{"id":6161160205724504,"definition":{"title":"Pods Running By Namespace","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_red","value":2000},{"comparator":">","palette":"white_on_yellow","value":1500},{"comparator":"<=","palette":"white_on_green","value":3000}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:kubernetes.pods.running{$namespace,$deployment,$cluster,$statefulset,$daemonset,$job} by {kube_cluster_name,kube_namespace}","aggregator":"max"}],"formulas":[{"formula":"query1"}],"sort":{"count":100,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":2,"y":10,"width":2,"height":3}},{"id":2421837657330594,"definition":{"title":"Pods Status Phase","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"failed"},{"formula":"query2","alias":"pending"},{"formula":"query3","alias":"running"},{"formula":"query4","alias":"succeeded"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.pod.status_phase{$cluster,$namespace,$deployment,pod_phase:failed,$statefulset,$daemonset,$job}","data_source":"metrics","name":"query1"},{"query":"sum:kubernetes_state.pod.status_phase{$cluster,$namespace,$deployment,pod_phase:pending,$statefulset,$daemonset,$job}","data_source":"metrics","name":"query2"},{"query":"sum:kubernetes_state.pod.status_phase{$cluster,$namespace,$deployment,pod_phase:running,$statefulset,$daemonset,$job}","data_source":"metrics","name":"query3"},{"query":"sum:kubernetes_state.pod.status_phase{$cluster,$namespace,$deployment,pod_phase:succeeded,$statefulset,$daemonset,$job}","data_source":"metrics","name":"query4"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":10,"width":6,"height":3}}]},"layout":{"x":0,"y":0,"width":12,"height":14}},{"id":3418864353162908,"definition":{"title":"Overview","title_align":"center","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3444290840959458,"definition":{"title":"Pods Running","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Pods Running"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes.pods.running{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job,$cronjob}","data_source":"metrics","name":"query1"}],"style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":8,"height":2}},{"id":2463813939398348,"definition":{"title":"Pods Running (changed weekly)","title_size":"16","title_align":"left","type":"change","custom_links":[],"requests":[{"order_by":"change","order_dir":"desc","increase_good":true,"change_type":"absolute","response_format":"scalar","formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.pods.running{$namespace,$cluster,$deployment,$statefulset,$daemonset,$job} by {kube_namespace,kube_deployment}","aggregator":"sum"}]}]},"layout":{"x":8,"y":0,"width":2,"height":6}},{"id":7135389228788322,"definition":{"title":"Pods in Bad Phase by Namespaces","title_size":"16","title_align":"left","type":"toplist","requests":[{"conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.pod.status_phase{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job,$cronjob,!pod_phase:running,!pod_phase:succeeded} by {pod_phase,kube_namespace}","data_source":"metrics","name":"query1","aggregator":"last"}],"formulas":[{"formula":"query1"}],"sort":{"count":100,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}]},"layout":{"x":10,"y":0,"width":2,"height":6}},{"id":868367773936188,"definition":{"title":"Pods running by Namespace","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Pods Running"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.pods.running{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {kube_cluster_name,kube_namespace}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":2,"width":8,"height":4}}]},"layout":{"x":0,"y":14,"width":12,"height":7}},{"id":2768845919270966,"definition":{"title":"Containers","title_align":"center","background_color":"purple","type":"group","layout_type":"ordered","widgets":[{"id":5129512503162770,"definition":{"title":"Containers States","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Ready"},{"formula":"query2","alias":"Running"},{"formula":"query3","alias":"Terminated"},{"formula":"query4","alias":"Waiting"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes_state.container.ready{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job}","data_source":"metrics","name":"query1"},{"query":"sum:kubernetes_state.container.running{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job}","data_source":"metrics","name":"query2"},{"query":"sum:kubernetes_state.container.terminated{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job}","data_source":"metrics","name":"query3"},{"query":"sum:kubernetes_state.container.waiting{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job}","data_source":"metrics","name":"query4"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":935123463493438,"definition":{"title":"Containers OOM Killed (by Pod)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"response_format":"timeseries","queries":[{"query":"sum:kubernetes.containers.state.terminated{$cluster,$namespace,$deployment,reason:oomkilled,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":656508063035940,"definition":{"title":"Containers in CrashloopBackOff (by Pod)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"CrashloopBackOff"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes.containers.state.waiting{$cluster,$namespace,$deployment,reason:crashloopbackoff,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":3,"width":6,"height":3}},{"id":8344338296649714,"definition":{"title":"Container Restarts by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Restarts"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes_state.container.restarts{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":3,"width":6,"height":3}},{"id":4168817338968104,"definition":{"title":"CPU Usage by Container","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"CPU Usage"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes.cpu.usage.total{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {kube_container_name,container_id}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":6,"width":6,"height":3}},{"id":548956235839998,"definition":{"title":"Memory Usage by Container","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Memory Usage"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes.memory.usage{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {kube_container_name,container_id}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":6,"width":6,"height":3}},{"id":4452460060384354,"definition":{"title":"Network Rate by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Received Bytes"},{"formula":"query2","alias":"Transmitted Bytes"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes.network.rx_bytes{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"},{"query":"sum:kubernetes.network.tx_bytes{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query2"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":9,"width":6,"height":3}},{"id":2910207004674228,"definition":{"title":"Network Errors by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["max","value","avg"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Received Errors"},{"formula":"query2","alias":"Transmitted Errors"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes.network.rx_errors{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query1"},{"query":"sum:kubernetes.network.tx_errors{$cluster,$namespace,$deployment,$statefulset,$daemonset,$job} by {pod_name}","data_source":"metrics","name":"query2"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":9,"width":6,"height":3}}]},"layout":{"x":0,"y":21,"width":12,"height":13,"is_column_break":true}},{"id":2598276979196476,"definition":{"title":"CPU","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3864154480412278,"definition":{"title":"Most CPU-intensive containers","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"toplist","requests":[{"style":{"palette":"cool"},"response_format":"scalar","queries":[{"query":"avg:container.cpu.user{*} by {image_name,image_tag}","data_source":"metrics","name":"query1","aggregator":"max"}],"formulas":[{"formula":"query1"}],"sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5442526448781182,"definition":{"title":"CPU by container","title_size":"16","title_align":"left","show_legend":false,"time":{"live_span":"1h"},"type":"timeseries","requests":[{"queries":[{"data_source":"metrics","name":"query1","query":"avg:container.cpu.user{*}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":1756732651231868,"definition":{"title":"CPU user by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.cpu.user{*} by {image_name,image_tag}.fill(0)","data_source":"metrics","name":"query1"}],"style":{"palette":"cool"},"display_type":"line"}],"custom_links":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":2017598007244702,"definition":{"title":"CPU system by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.cpu.system{*} by {image_name,image_tag}.fill(0)","data_source":"metrics","name":"query1"}],"style":{"palette":"cool"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":5972057137454574,"definition":{"title":"CPU % (based on container limit)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"100 * (query1 / query2)"}],"response_format":"timeseries","queries":[{"query":"avg:container.cpu.limit{*} by {image_name,image_tag}.fill(0)","data_source":"metrics","name":"query2"},{"query":"avg:container.cpu.usage{*} by {image_name,image_tag}.fill(0)","data_source":"metrics","name":"query1"}],"style":{"palette":"cool"},"display_type":"line"}],"markers":[],"custom_links":[]},"layout":{"x":4,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":34,"width":12,"height":5}},{"id":6077840029820466,"definition":{"title":"Memory","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3907384982776360,"definition":{"title":"Most RAM-intensive containers","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"toplist","requests":[{"style":{"palette":"dog_classic"},"response_format":"scalar","queries":[{"query":"avg:container.memory.rss{*} by {container_name}","data_source":"metrics","name":"query1","aggregator":"max"}],"formulas":[{"formula":"query1"}],"sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":4294086532925064,"definition":{"title":"Memory by container","title_size":"16","title_align":"left","show_legend":false,"time":{"live_span":"1h"},"type":"heatmap","custom_links":[],"requests":[{"style":{"palette":"dog_classic"},"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:container.memory.rss{*} by {container_name}"}]}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":2236678486221828,"definition":{"title":"Memory usage by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.memory.usage{*} by {image_name,image_tag}.fill(0)","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":5478009453339414,"definition":{"title":"Cache memory by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:container.memory.cache{*} by {image_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":39,"width":12,"height":5}},{"id":3290377134411716,"definition":{"title":"IO","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":502629919723466,"definition":{"title":"Avg. I/O bytes read by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.io.read{*} by {image_name,image_tag}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"area"}],"custom_links":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":2425041711547512,"definition":{"title":"Avg. I/O bytes written by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.io.write{*} by {image_name,image_tag}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"area"}],"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":3747834768141184,"definition":{"title":"Avg. I/O write operations by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.io.write.operations{*} by {image_name,image_tag}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":718228296831820,"definition":{"title":"Avg. I/O read operations by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.io.read.operations{*} by {image_name,image_tag}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":0,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":44,"width":12,"height":5}},{"id":8450657140915316,"definition":{"title":"Network by Image","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5933752878253200,"definition":{"title":"Avg. rx bytes by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.net.rcvd{*} by {image_name,image_tag}","data_source":"metrics","name":"query1"}],"style":{"palette":"cool"},"display_type":"area"}],"custom_links":[]},"layout":{"x":0,"y":0,"width":4,"height":3}},{"id":1408321322187584,"definition":{"title":"Avg. tx bytes by image","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:container.net.sent{*} by {image_name,image_tag}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"area"}],"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":3}},{"id":4474713822966608,"definition":{"title":"Most tx-intensive containers","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"toplist","requests":[{"style":{"palette":"purple"},"response_format":"scalar","queries":[{"query":"avg:container.net.sent{*} by {container_name}","data_source":"metrics","name":"query1","aggregator":"max"}],"formulas":[{"formula":"query1"}],"sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"custom_links":[]},"layout":{"x":8,"y":0,"width":4,"height":3}}]},"layout":{"x":0,"y":49,"width":12,"height":4}}],"template_variables":[{"name":"cluster","prefix":"kube_cluster_name","available_values":[],"default":"cs-v3-live-use1-02-eksec2"},{"name":"namespace","prefix":"kube_namespace","available_values":[],"default":"cs-v3-live-ns"},{"name":"deployment","prefix":"kube_deployment","available_values":[],"default":"*"},{"name":"statefulset","prefix":"kube_stateful_set","available_values":[],"default":"*"},{"name":"daemonset","prefix":"kube_daemon_set","available_values":[],"default":"*"},{"name":"job","prefix":"kube_job","available_values":[],"default":"*"},{"name":"cronjob","prefix":"kube_cronjob","available_values":[],"default":"*"},{"name":"host","prefix":"host","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}
